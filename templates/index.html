{% extends 'base.html' %}

{% block content %}
<!-- Hero Banner -->
<section class="hero-banner bg-gradient-fire text-white py-5">
    <div class="container text-center">
        <h1 class="display-4 fw-bold"><i class="fas fa-fire"></i> Contas Free Fire</h1>
        <p class="lead">{{ settings.banner_text if settings else 'As melhores contas você encontra aqui!' }}</p>
        <a href="#produtos" class="btn btn-warning btn-lg"><i class="fas fa-shopping-bag"></i> Ver Catálogo</a>
    </div>
</section>

<!-- Categorias -->
<section class="py-4 bg-light">
    <div class="container">
        <div class="d-flex flex-wrap justify-content-center gap-2">
            <a href="{{ url_for('index') }}" class="btn btn-outline-dark {% if not current_category %}active{% endif %}">
                Todas
            </a>
            {% for cat in categories %}
            <a href="{{ url_for('category', id=cat.id) }}" class="btn btn-outline-dark {% if current_category and current_category.id == cat.id %}active{% endif %}">
                {{ cat.name }}
            </a>
            {% endfor %}
        </div>
    </div>
</section>

{% if featured_products and not current_category and not search_query %}
<!-- Produtos em Destaque -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-4"><i class="fas fa-star text-warning"></i> Destaques</h2>
        <div class="row g-4">
            {% for product in featured_products %}
            <div class="col-md-4 col-lg-3">
                <div class="card product-card h-100 shadow-sm">
                    <div class="position-relative">
                        {% if product.image %}
                        <img src="{{ url_for('static', filename='images/products/' + product.image) }}" class="card-img-top" alt="{{ product.name }}">
                        {% else %}
                        <img src="https://via.placeholder.com/300x200/FF6B00/FFFFFF?text=FREE+FIRE" class="card-img-top" alt="{{ product.name }}">
                        {% endif %}
                        <span class="badge bg-warning position-absolute top-0 end-0 m-2">Destaque</span>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <div class="product-info mb-2">
                            {% if product.level %}<span class="badge bg-secondary"><i class="fas fa-level-up-alt"></i> Nível {{ product.level }}</span>{% endif %}
                            {% if product.diamonds %}<span class="badge bg-info"><i class="fas fa-gem"></i> {{ product.diamonds }}</span>{% endif %}
                            {% if product.rank %}<span class="badge bg-danger">{{ product.rank }}</span>{% endif %}
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            {% if product.original_price %}
                            <div>
                                <small class="text-muted text-decoration-line-through">R$ {{ "%.2f"|format(product.original_price) }}</small>
                                <span class="h5 text-success mb-0">R$ {{ "%.2f"|format(product.price) }}</span>
                            </div>
                            {% else %}
                            <span class="h5 text-success mb-0">R$ {{ "%.2f"|format(product.price) }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="card-footer bg-white border-0">
                        <a href="{{ url_for('product_detail', id=product.id) }}" class="btn btn-dark w-100 mb-2">Ver Detalhes</a>
                        <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="btn btn-warning w-100">
                            <i class="fas fa-cart-plus"></i> Comprar
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Todos os Produtos -->
<section class="py-5 bg-light" id="produtos">
    <div class="container">
        <h2 class="text-center mb-4">
            {% if current_category %}
                {{ current_category.name }}
            {% elif search_query %}
                Resultados para "{{ search_query }}"
            {% else %}
                Todas as Contas
            {% endif %}
        </h2>
        
        {% if products %}
        <div class="row g-4">
            {% for product in products %}
            <div class="col-md-4 col-lg-3">
                <div class="card product-card h-100 shadow-sm">
                    <div class="position-relative">
                        {% if product.image %}
                        <img src="{{ url_for('static', filename='images/products/' + product.image) }}" class="card-img-top" alt="{{ product.name }}">
                        {% else %}
                        <img src="https://via.placeholder.com/300x200/FF6B00/FFFFFF?text=FREE+FIRE" class="card-img-top" alt="{{ product.name }}">
                        {% endif %}
                        {% if not product.is_available %}
                        <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-flex align-items-center justify-content-center">
                            <span class="badge bg-danger fs-5">VENDIDO</span>
                        </div>
                        {% endif %}
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <div class="product-info mb-2">
                            {% if product.level %}<span class="badge bg-secondary"><i class="fas fa-level-up-alt"></i> Nível {{ product.level }}</span>{% endif %}
                            {% if product.diamonds %}<span class="badge bg-info"><i class="fas fa-gem"></i> {{ product.diamonds }}</span>{% endif %}
                            {% if product.skins_count %}<span class="badge bg-primary"><i class="fas fa-tshirt"></i> {{ product.skins_count }} skins</span>{% endif %}
                            {% if product.rank %}<span class="badge bg-danger">{{ product.rank }}</span>{% endif %}
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            {% if product.original_price %}
                            <div>
                                <small class="text-muted text-decoration-line-through">R$ {{ "%.2f"|format(product.original_price) }}</small>
                                <span class="h5 text-success mb-0">R$ {{ "%.2f"|format(product.price) }}</span>
                            </div>
                            {% else %}
                            <span class="h5 text-success mb-0">R$ {{ "%.2f"|format(product.price) }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="card-footer bg-white border-0">
                        <a href="{{ url_for('product_detail', id=product.id) }}" class="btn btn-outline-dark w-100 mb-2">Ver Detalhes</a>
                        {% if product.is_available %}
                        <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="btn btn-warning w-100">
                            <i class="fas fa-cart-plus"></i> Comprar
                        </a>
                        {% else %}
                        <button class="btn btn-secondary w-100" disabled>Indisponível</button>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-5">
            <i class="fas fa-search fa-3x text-muted mb-3"></i>
            <p class="lead text-muted">Nenhum produto encontrado.</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- Vantagens -->
<section class="py-5">
    <div class="container">
        <div class="row text-center g-4">
            <div class="col-md-4">
                <div class="p-3">
                    <i class="fas fa-shield-alt fa-3x text-warning mb-3"></i>
                    <h5>100% Seguro</h5>
                    <p class="text-muted">Todas as contas são verificadas e garantidas</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="p-3">
                    <i class="fas fa-bolt fa-3x text-warning mb-3"></i>
                    <h5>Entrega Rápida</h5>
                    <p class="text-muted">Receba seus dados em até 30 minutos após pagamento</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="p-3">
                    <i class="fas fa-headset fa-3x text-warning mb-3"></i>
                    <h5>Suporte 24h</h5>
                    <p class="text-muted">Atendimento via WhatsApp disponível 24 horas</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
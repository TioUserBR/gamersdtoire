{% extends 'admin/base_admin.html' %}

{% block content %}
<h2 class="mb-4"><i class="fas fa-edit"></i> Editar Produto</h2>

<div class="card shadow-sm">
    <div class="card-body">
        <form method="POST" enctype="multipart/form-data">
            <div class="row g-3">
                <div class="col-md-8">
                    <label class="form-label">Nome da Conta *</label>
                    <input type="text" name="name" class="form-control" required value="{{ product.name }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Categoria</label>
                    <select name="category_id" class="form-select">
                        <option value="">Selecione...</option>
                        {% for cat in categories %}
                        <option value="{{ cat.id }}" {% if product.category_id == cat.id %}selected{% endif %}>{{ cat.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-12">
                    <label class="form-label">Descrição *</label>
                    <textarea name="description" class="form-control" rows="4" required>{{ product.description }}</textarea>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Preço (R$) *</label>
                    <input type="number" name="price" class="form-control" step="0.01" required value="{{ product.price }}">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Preço Original</label>
                    <input type="number" name="original_price" class="form-control" step="0.01" value="{{ product.original_price or '' }}">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Nível</label>
                    <input type="number" name="level" class="form-control" value="{{ product.level or '' }}">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Diamantes</label>
                    <input type="number" name="diamonds" class="form-control" value="{{ product.diamonds or '' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Quantidade de Skins</label>
                    <input type="number" name="skins_count" class="form-control" value="{{ product.skins_count or '' }}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Rank</label>
                    <select name="rank" class="form-select">
                        <option value="">Selecione...</option>
                        {% for r in ['Bronze', 'Prata', 'Ouro', 'Platina', 'Diamante', 'Mestre', 'Grandmaster', 'Desafiante'] %}
                        <option value="{{ r }}" {% if product.rank == r %}selected{% endif %}>{{ r }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Nova Imagem</label>
                    <input type="file" name="image" class="form-control" accept="image/*">
                    {% if product.image %}
                    <small class="text-muted">Atual: {{ product.image }}</small>
                    {% endif %}
                </div>
                <div class="col-12">
                    <label class="form-label">Personagens</label>
                    <input type="text" name="characters" class="form-control" value="{{ product.characters or '' }}">
                </div>
                <div class="col-md-6">
                    <div class="form-check">
                        <input type="checkbox" name="is_featured" class="form-check-input" id="featured" {% if product.is_featured %}checked{% endif %}>
                        <label class="form-check-label" for="featured">Produto em destaque</label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-check">
                        <input type="checkbox" name="is_available" class="form-check-input" id="available" {% if product.is_available %}checked{% endif %}>
                        <label class="form-check-label" for="available">Disponível para venda</label>
                    </div>
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-warning btn-lg">
                        <i class="fas fa-save"></i> Salvar Alterações
                    </button>
                    <a href="{{ url_for('admin_products') }}" class="btn btn-secondary btn-lg">Cancelar</a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}